/*
Игра "Угадай число"
Ваша задача — реализовать игру, в которой необходимо будет создать функцию play() int, эта функция 
будет пытаться угадать загаданное число. Загаданное число находится в диапазоне 
от 1 до 100 включительно.

Условия задания
Для вас уже создана функция func guess(num int) (int, error), данная функция нужна для проверки 
загаданного числа.
Функция guess возвращает один из следующих вариантов:

-1, nil, если загаданное число меньше переданного.
1, nil, если загаданное число больше переданного.
0, nil, если число угадано.
0, too many attempts, если функция была вызвана больше 6 раз, что будет считаться за невыполненное задание.
Функция play, которую вам необходимо реализовать, должна угадать загаданное число, 
используя функцию guess для проверки своих предположений.  Когда функция play угадает число, 
она должна вернуть это значение.

Примечания
У вашей функции play, которую вам необходимо реализовать, есть всего 6 попыток, 
чтобы отгадать число, так как функция guess начнет возвращать ошибку после 6 попытки. 
За 6 вызовов можно со 100% вероятностью отгадать загаданное число. 
Такая же тактика может использоваться для поиска значений в отсортированном ряде данных, 
например в базах данных.
*/

package main

func play() int {
    low, high := 1, 100

    for {
        mid := (low + high) / 2

        res, err := guess(mid)
        if err != nil {
            // На седьмом вызове guess(mid) гарантированно too many attempts,
            // а значит именно этот mid  единственный оставшийся кандидат.
            return mid
        }
        if res == 0 {
            // Если всё таки повезло угадать до исчерпания 6 попыток
            return mid
        }
        if res < 0 {
            // Загаданное число < mid
            high = mid - 1
        } else {
            // res > 0: загаданное число > mid
            low = mid + 1
        }
    }
}
